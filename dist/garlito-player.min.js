const config={stream:{type:"",url:""},lastSongsUrl:{url:""},statisticsEverySecond:5,statistics:{type:"",url:""},colorConfiguration:{playerBackgroundColor:"#ffffff"},autoplay:!0,plugin:{url:""},wave:{color:"",enabled:!0},icon_color:""};$(window).on("load",function(){!function(){let t=document.getElementById("garlitoPlayerAppend");t.innerHTML='<div class="modal fade" id="checkLastSongsModal" tabindex="-1" aria-labelledby="checkLastSongsModalLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" id="exampleModalLabel">Τελευταία Τραγούδια </h4> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div><div id="lastSongsTable" class="modal-body "> </div><div class="modal-footer"> </div></div></div></div><div id="topBar" class="top-bar"> <div class="top-bar-icons"> <a href="https://facebook.com/bohemeradiogr" target="_blank" id="facebookIcon" class="top-bar-icon"></a> <a href="https://instagram.com/boheme.radio" target="_blank" id="instagramIcon" class="top-bar-icon"></a> <div id="historyIcon" class="top-bar-icon" data-bs-toggle="modal" data-bs-target="#checkLastSongsModal"></div><a href="https://chat.boheme-radio.com/boheme-radio" target="_blank" id="chatIcon" class="top-bar-icon"></a> </div></div><div id="playerHolder" class="player-holder"> <div class="player"> <input style="display:none" type="range" min="0" max="1" value="1" step="0.01" class="istyle" id="volumeSlider"> <div style="display:none" id="closePlayerButton" class="close-button">x</div><div style="display:none" id="muteButton" class="button"></div><div id="stationLogo" class="station-logo"></div><div id="stationTitle" class="station-title"></div><table class="info-table"> <tbody> <tr> <td rowspan="3"><img id="cover"></td><td><b><div id="artist"></div></b></td></tr><tr> <td><b><div id="title"></div></b></td></tr><tr> <td><div id="album"></div></td></tr></tbody> </table> <audio style="display:none"></audio> <div class="buttons-holder"> <div style="display:none" id="playButton" class="button"></div><div style="display:none" id="stopButton" class="button"></div></div></div><div id="waveEffect" class="wave2"></div><div></div></div>',document.body.appendChild(t)}();$("#topBar");const t=document.querySelector("audio"),o=($("#audioSource"),$("#playButton")),e=$("#stopButton"),a=$("#muteButton"),i=$("#volumeSlider"),n=$("#closePlayerButton"),l=$("#waveEffect"),s=$("#playerHolder"),c=$("#cover"),r=$("#title"),d=$("#artist"),u=$("#album"),g=$("#fullTitle"),p=$("#stationTitle"),m=($("#stationLogo"),$("#facebookIcon"),$("#instagramIcon"),$("#historyIcon"));$("#chatIcon"),$("#checkLastSongsModal");function f(){config.statistics&&"centova_cast"===config.statistics.type&&$.get(config.statistics.url,t=>{!function(t){o=c,e=t.imageurl,o.attr("src",e),k(d,v(t.artist)),k(r,y(t.title)),k(u,function(t){if(t&&t.length>=20)return"";return t}(t.album)),k(g,v(t.artist)+" - "+y(t.title));var o,e}(t.data[0].track)})}function v(t){if(!t.includes(";"))return t;t.split(";")[0]}function y(t){return t}function b(t){t.css("display","none")}function h(t){t.css("display","inline-block")}function k(t,o){t.text(o)}function w(t,o){t.css("background",o)}function _(t,o){t.css("border-color",o)}i.on("input",o=>{t.volume=i.val(),i.val()<=0?b(l):h(l)}),m.on("click",()=>{console.log(config.lastSongsUrl.url),$.get(config.lastSongsUrl.url,t=>{let o=[];t&&t.items&&t.items.forEach(t=>{"Αγνωστο - Boheme Radio Spot"!==t.title&&o.push(t)}),document.contains(document.getElementById("testooo"))&&document.getElementById("testooo").remove(),function(t,o){!function(t){document.contains(document.getElementById(t))&&document.getElementById(t).remove()}(o+"uniqueElement");var e=document.createElement("div");e.id=o+"uniqueElement",e.innerHTML=t,document.getElementById(o).appendChild(e)}(function(t){let o='<table class"table table-striped table-responsive"><thead> <tr> <th>Artwork</th> <th>Title</th><th>Album</th> <th>Date</th></tr></thead><tbody>';return t&&t.forEach(t=>{o=o+' <tr><td><img src="'+t.enclosure.url+'"></td></td><td>'+t.title+"</td><td>"+t.description+"</td> <td>"+new Date(1e3*t.date).toLocaleTimeString()+"</td></tr>"}),o+="</tbody></table>"}(o),"lastSongsTable")})}),async function(){h(o),h(i),await async function(){await $.ajax({url:"/wp-content/plugins/garlito-player/helpers/player-info.php"}).done(t=>{!function(t){config.stream.url=t.stream_url,config.stream.type=t.stream_type,config.statistics.type=t.statistics_type,config.statistics.url=t.statistics_url,config.statisticsEverySecond=t.statisticsEverySecond,config.autoplay=t.autoplay,config.colorConfiguration.playerBackgroundColor=t.playerBackgroundColor,config.plugin.ulr=t.plugin_url,config.wave.color=t.wave_color,config.wave.enabled=t.wave_enabled,config.icon_color=t.icon_color,config.lastSongsUrl.url=t.last_songs_url,k(p,t.station_title)}(t)})}(),config.stream&&("shoutcast"===config.stream.type?t.src=config.stream.url:"icecast"===config.stream.type&&(t.src=config.stream.url));config.colorConfiguration&&(config.colorConfiguration.playerBackgroundColor&&(c=s,r=config.colorConfiguration.playerBackgroundColor,d=.89,c.css("background",function(t,o){var e;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+","+o+")"}(r,d)),w(n,config.colorConfiguration.playerBackgroundColor)),config.wave.color&&function(t){l.css("background-color",t),l.css("mask",'url("../wp-content/plugins/garlito-player/assets/img/wave_gray.svg") 0 0 repeat-x'),l.css("-webkit-mask",'url("../wp-content/plugins/garlito-player/assets/img/wave_gray.svg") 0 0 repeat-x')}(config.wave.color),config.icon_color&&(w(o,config.icon_color),_(o,config.icon_color),w(a,config.icon_color),_(a,config.icon_color),w(e,config.icon_color),_(e,config.icon_color))),f(),setInterval(()=>{f()},1e4),h(s);var c,r,d}(),f(),o.click(()=>{b(o),h(a),h(i),h(e),h(l),t.src=config.stream.url,t.load(),t.play()}),e.click(()=>{b(l),b(e),b(a),b(i),h(o),t.src=""}),a.click(()=>{t.muted=!t.muted,t.muted?(b(l),a.css("mask","url(wp-content/plugins/garlito-player/assets/img/mute.svg) no-repeat center / contain"),a.css("-webkit-mask","url(wp-content/plugins/garlito-player/assets/img/mute.svg) no-repeat center / contain")):(h(l),a.css("mask","url(wp-content/plugins/garlito-player/assets/img/speaker.svg) no-repeat center / contain"),a.css("-webkit-mask","url(wp-content/plugins/garlito-player/assets/img/speaker.svg) no-repeat center / contain"))}),n.click(()=>{b(s),e.click()})});
